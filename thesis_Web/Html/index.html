<!DOCTYPE html>
<html>
<head>
	<title>Reservation List</title>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

<body>
	<h1 align="center">
		<font face="fantasy">Reservation List</font>&nbsp;<img src="https://thesis-testing.s3.amazonaws.com/5G_3GPP.jpeg"
		width=10% height=10%>
	</h1>

	<div style="text-align:center;">
	<input type="text" id="updateId" name="updateId" style="font-size:15px">
	<input type="submit" value="Ping Free5GC" style="font-size:15px" onclick="pingFunction();">
	<button type="submit" onclick="window.location.reload();">Reload</button>
	</div>
	<br></br>
	<div style="text-align:center;">
		<label for="Name">Name:</label>
		<input type="text" id="Name" name="Name" style="font-size:15px">
		<label for="Order">Order:</label>
		<select id="Order" style="font-size:15px">
			<option>Choose an order</option>
			<option>4G</option>
			<option>Student-4G</option>
			<option>5G</option>
			<option>Student-5G</option>
		</select>
		<input type="submit" value="Submit Reservation" style="font-size:15px" onClick="addReservation();">
	</div>
	<script>
		function addReservation(){
			var information = {Name: document.getElementById('Name').value, Order: document.getElementById('Order').value};
			$.ajax({
				type: "POST",
				url: "https://o1guebxnyb.execute-api.us-east-1.amazonaws.com/reservation/reserve",
				crossDomain: true,
				data: JSON.stringify(information),
				contentType: "application/json",
				datatype: "json",
				success: function (status) {
					window.location.reload();
				}
			});
		}

		$(document).ready(function () {
			showTable();
		});
		function showTable() {
			$.ajax({
				type: "GET",
				url: "https://o1guebxnyb.execute-api.us-east-1.amazonaws.com/reservation/list",
				crossDomain: true,
				contentType: "application/json",
				datatype: "json",
				success: function (value){
					$("#reservation").empty();
					$.each(value.comments, function (index, value) {
							let tr = "<tr>" +
								"<td align='center'>" + value.id + "</td>" +
								"<td align='center'>" + value.Name + "</td>" +
								"<td align='center'>" + value.Order + "</td>" +
								"<td align='center'>" + value.reservationStatus + "</td>" +
								"</tr>"
							$("#reservation").append(tr);
					})
					console.log(value);
				},
				error: function (jqXHR, exception) {
					console.log(jqXHR, exception);
				}
			});
			
		}

		function pingFunction(){
			$.ajax({
				type: "POST",
				url: "https://o1guebxnyb.execute-api.us-east-1.amazonaws.com/reservation/pingfree5gc",
				crossDomain: true,
				success: function (updateId) {
					var test = { id: document.getElementById('updateId').value};
					$.ajax({
						type: "POST",
						url: "https://o1guebxnyb.execute-api.us-east-1.amazonaws.com/reservation/update",
						crossDomain: true,
						data: JSON.stringify(test),
						contentType: "application/json",
						datatype: "json",
						success: function () {
							console.log("Reload");
							window.location.reload();
						}
					});
				}
			});
		}
	</script>

	<table style="border-top:10px blue solid;border-bottom:10px blue;" width= 100% height=30%>
		<thead>
			<tr>
				<th><font size="5">ID</font></th>
				<th><font size="5">Name</font></th>
				<th><font size="5">Order</font></th>
				<th><font size="5">Status</font></th>
			</tr>
		</thead>
		<tbody id="reservation">
			<tr>
			</tr>
		</tbody>
	</table>
</body>
</html>